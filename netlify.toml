
# https://docs.netlify.com/configure-builds/file-based-configuration/#sample-netlify-toml-file
[build]
  publish = "_site/"
  command = "npm run build"
  # https://docs.netlify.com/configure-builds/manage-dependencies/
  environment = { NODE_VERSION = "18.16.1", NODE_ENV = "production" }

# https://docs.netlify.com/configure-builds/file-based-configuration/#pretty-urls
[build.processing.html]
  pretty_urls = false

# https://www.netlify.com/products/dev/
# https://github.com/netlify/cli/blob/main/docs/netlify-dev.md
[dev]
  publish    = "_site/"
  command = "deno task dev" # Command to start your dev server
  targetPort = 4000 # The port for your application server, framework or site generator
  port = 8888 # The port that the netlify dev will be accessible on
  autoLaunch = true # a Boolean value that determines if Netlify Dev launches the local server address in your browser
  # https://docs.netlify.com/configure-builds/file-based-configuration/#netlify-dev
  framework  = "#custom"

[[redirects]]
  from = "https://www.dollyskettle.com/*"
  to = "https://dollyskettle.com/:splat"
  status = 302
  force = true

# https://docs.netlify.com/routing/redirects/#syntax-for-the-netlify-configuration-file
[[redirects]]
  from = "/index/"
  to = "/recipes/"
  status = 302
  force = true

[[redirects]]
  from = "/wp-admin/*"
  to = "https://content.dollyskettle.com/wp-admin/:splat"
  status = 302

# Deploy Preview context:
# All deploys generated from a pull/merge request
# will inherit these settings.
[context.deploy-preview.environment]
  ASK_SEARCH_ENGINES_NOT_TO_INDEX = "1"

# Branch deploy context:
# All deploys that are not from a pull/merge request
# or from the production branch will inherit these settings.
[context.branch-deploy.environment]
  ASK_SEARCH_ENGINES_NOT_TO_INDEX = "1"
